<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:cache="http://www.springframework.org/schema/cache"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
      http://www.springframework.org/schema/context
      http://www.springframework.org/schema/context/spring-context.xsd
      http://www.springframework.org/schema/cache
      http://www.springframework.org/schema/cache/spring-cache.xsd
      http://www.springframework.org/schema/aop
      http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
      ">

    <!-- 扫描文件（自动将servicec层注入） -->
    <context:component-scan base-package="com.github.jwxa"/>

    <!-- 支持缓存注解 -->
    <cache:annotation-driven/>

    <!--&lt;!&ndash;  缓存 &ndash;&gt;-->
    <!--<bean id="cacheManagerFactory" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">-->
    <!--<property name="configLocation"  value="classpath:conf/ehcache.xml"/>-->
    <!--</bean>-->
    <!--&lt;!&ndash;默认是cacheManager &ndash;&gt;-->
    <!--<bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager">-->
    <!--<property name="cacheManager"  ref="cacheManagerFactory"/>-->
    <!--</bean>-->

    <!--上面老写法 下面为新写法-->
    <!-- EhCache library setup -->
    <bean id="cacheManagerFactory" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"
          p:configLocation="classpath:conf/ehcache.xml"/>
    <!-- 默认是cacheManager -->
    <bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager"
          p:cacheManager-ref="cacheManagerFactory"/>

    <!--swagger-->
    <!--<context:property-placeholder location="classpath:conf/swagger.properties"/>-->
    <!--<bean class="MySwaggerConfig" name="swaggerConfig"/>-->


    <!-- 启动对@AspectJ注解的支持 -->
    <!--<aop:aspectj-autoproxy/>-->
    <!--通知spring使用cglib而不是jdk的来生成代理方法 AOP可以拦截到Controller-->
    <aop:aspectj-autoproxy proxy-target-class="true" />
    <!--切面类用@Component注入-->
    <bean class="com.github.jwxa.interceptor.BasedInterceptorAspect"/>
    <bean class="com.github.jwxa.interceptor.SystemLogAspect"/>

</beans>
